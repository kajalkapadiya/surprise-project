{% extends "base.html" %}
{% block content %}
<style>
    body {
        background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
        min-height: 100vh;
        font-family: 'Georgia', serif;
        overflow-x: hidden;
    }

    .story-nav {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 1.5rem;
        z-index: 100;
    }

    .story-nav a {
        background: linear-gradient(45deg, #e91e63, #9c27b0);
        color: #fff;
        padding: 0.8rem 1.5rem;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease;
    }

    .story-nav a:hover {
        transform: translateY(-3px);
    }


    .romantic-container {
        position: relative;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px 20px;
    }

    /* Floating Hearts */
    .heart {
        position: absolute;
        color: #ff6b9d;
        font-size: 20px;
        animation: floatUp 6s infinite linear;
        opacity: 0;
    }

    @keyframes floatUp {
        0% {
            opacity: 1;
            transform: translateY(100vh) scale(0);
        }

        10% {
            opacity: 1;
            transform: translateY(90vh) scale(1);
        }

        90% {
            opacity: 1;
            transform: translateY(-10vh) scale(1);
        }

        100% {
            opacity: 0;
            transform: translateY(-20vh) scale(0);
        }
    }

    /* Rose Petals */
    .petal {
        position: absolute;
        color: #ff69b4;
        font-size: 25px;
        animation: fallDown 8s infinite linear;
        opacity: 0.7;
    }

    @keyframes fallDown {
        0% {
            transform: translateY(-100vh) rotate(0deg);
            opacity: 1;
        }

        100% {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
        }
    }

    /* Candles */
    .candle {
        position: fixed;
        font-size: 40px;
        z-index: 1;
    }

    .candle-left {
        top: 20%;
        left: 5%;
        animation: flicker 2s infinite alternate;
    }

    .candle-right {
        top: 20%;
        right: 5%;
        animation: flicker 2.5s infinite alternate;
    }

    .candle-bottom-left {
        bottom: 20%;
        left: 8%;
        animation: flicker 1.8s infinite alternate;
    }

    .candle-bottom-right {
        bottom: 20%;
        right: 8%;
        animation: flicker 2.2s infinite alternate;
    }

    @keyframes flicker {
        0% {
            filter: brightness(1) hue-rotate(0deg);
        }

        50% {
            filter: brightness(1.2) hue-rotate(10deg);
        }

        100% {
            filter: brightness(0.9) hue-rotate(-5deg);
        }
    }

    /* Letter Container */
    .letter-container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 40px;
        margin: 20px;
        max-width: 800px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        border: 2px solid rgba(255, 182, 193, 0.3);
        position: relative;
        z-index: 10;
    }

    .letter-container::before {
        content: '';
        position: absolute;
        top: -5px;
        left: -5px;
        right: -5px;
        bottom: -5px;
        background: linear-gradient(45deg, #ff6b9d, #ffc0cb, #ff69b4, #ffb6c1);
        border-radius: 25px;
        z-index: -1;
        animation: borderGlow 3s infinite alternate;
    }

    @keyframes borderGlow {
        0% {
            opacity: 0.5;
        }

        100% {
            opacity: 0.8;
        }
    }

    .letter-title {
        text-align: center;
        color: #d63384;
        font-size: 3rem;
        margin-bottom: 30px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        font-weight: bold;
        position: relative;
    }

    .letter-title::after {
        content: '💕';
        position: absolute;
        right: -50px;
        top: 50%;
        transform: translateY(-50%);
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% {
            transform: translateY(-50%) scale(1);
        }

        50% {
            transform: translateY(-50%) scale(1.2);
        }

        100% {
            transform: translateY(-50%) scale(1);
        }
    }

    .letter-content {
        font-size: 1.3rem;
        line-height: 1.8;
        color: #495057;
        text-align: left;
        position: relative;
    }

    .letter-content::first-letter {
        font-size: 4rem;
        float: left;
        line-height: 1;
        margin: 0 8px 0 0;
        color: #d63384;
        font-weight: bold;
    }

    /* Signature */
    .signature {
        text-align: right;
        margin-top: 40px;
        font-size: 1.5rem;
        color: #d63384;
        font-style: italic;
        position: relative;
    }

    .signature::before {
        content: '🌹';
        position: absolute;
        left: -30px;
        animation: rotate 4s infinite linear;
    }

    @keyframes rotate {
        from {
            transform: rotate(0deg);
        }

        to {
            transform: rotate(360deg);
        }
    }

    /* Balloons */
    .balloon {
        position: fixed;
        font-size: 50px;
        animation: float 6s infinite ease-in-out;
        z-index: 5;
    }

    .balloon-1 {
        top: 10%;
        left: 15%;
        animation-delay: 0s;
    }

    .balloon-2 {
        top: 15%;
        right: 15%;
        animation-delay: 2s;
    }

    .balloon-3 {
        bottom: 10%;
        left: 10%;
        animation-delay: 4s;
    }

    .balloon-4 {
        bottom: 15%;
        right: 10%;
        animation-delay: 1s;
    }

    @keyframes float {

        0%,
        100% {
            transform: translateY(0px) rotate(0deg);
        }

        25% {
            transform: translateY(-20px) rotate(2deg);
        }

        50% {
            transform: translateY(-10px) rotate(-1deg);
        }

        75% {
            transform: translateY(-30px) rotate(1deg);
        }
    }

    /* Typewriter cursor */
    .cursor {
        display: inline-block;
        width: 3px;
        height: 1.3rem;
        background-color: #d63384;
        animation: blink 1s infinite;
        margin-left: 2px;
    }

    @keyframes blink {

        0%,
        50% {
            opacity: 1;
        }

        51%,
        100% {
            opacity: 0;
        }
    }

    /* Love particles */
    .love-particle {
        position: absolute;
        pointer-events: none;
        color: #ff6b9d;
        font-size: 14px;
        animation: loveFloat 4s infinite ease-out;
        opacity: 0;
    }

    @keyframes loveFloat {
        0% {
            opacity: 1;
            transform: translateY(0) scale(0.5);
        }

        50% {
            opacity: 1;
            transform: translateY(-100px) scale(1);
        }

        100% {
            opacity: 0;
            transform: translateY(-200px) scale(0.5);
        }
    }

    @media (max-width: 768px) {
        .letter-container {
            padding: 20px;
            margin: 10px;
        }

        .letter-title {
            font-size: 2rem;
        }

        .letter-content {
            font-size: 1.1rem;
        }

        .candle {
            font-size: 30px;
        }

        .balloon {
            font-size: 35px;
        }
    }
</style>

<div class="romantic-container">
    <!-- Floating Hearts -->
    <div class="heart" style="left: 10%;">💖</div>
    <div class="heart" style="left: 20%; animation-delay: 1s;">💕</div>
    <div class="heart" style="left: 30%; animation-delay: 2s;">💗</div>
    <div class="heart" style="left: 40%; animation-delay: 3s;">💝</div>
    <div class="heart" style="left: 50%; animation-delay: 0.5s;">💖</div>
    <div class="heart" style="left: 60%; animation-delay: 1.5s;">💕</div>
    <div class="heart" style="left: 70%; animation-delay: 2.5s;">💗</div>
    <div class="heart" style="left: 80%; animation-delay: 3.5s;">💝</div>
    <div class="heart" style="left: 90%; animation-delay: 4s;">💖</div>

    <!-- Rose Petals -->
    <div class="petal" style="left: 15%; animation-delay: 0s;">🌹</div>
    <div class="petal" style="left: 35%; animation-delay: 2s;">🌸</div>
    <div class="petal" style="left: 55%; animation-delay: 4s;">🌺</div>
    <div class="petal" style="left: 75%; animation-delay: 1s;">🌹</div>
    <div class="petal" style="left: 85%; animation-delay: 3s;">🌸</div>

    <!-- Balloons -->
    <div class="balloon balloon-1">🎈</div>
    <div class="balloon balloon-2">🎈</div>
    <div class="balloon balloon-3">🎈</div>
    <div class="balloon balloon-4">🎈</div>

    <!-- Candles -->
    <div class="candle candle-left">🕯️</div>
    <div class="candle candle-right">🕯️</div>
    <div class="candle candle-bottom-left">🕯️</div>
    <div class="candle candle-bottom-right">🕯️</div>

    <!-- Letter Container -->
    <div class="letter-container">
        <h1 class="letter-title">My Heartfelt Letter</h1>
        <div id="letter" class="letter-content"></div>
        <div class="signature">
            With all my love,<br>
            Your Forever ❤️
        </div>
    </div>
</div>

<!-- Navigation -->
<div class="story-nav">
    <a href="/quiz">🏠 Want final surprise? before this solve the quiz dear. </a>
</div>
{% endblock %}

{% block scripts %}
<script>
    const text = `Hi Nisarg,

Finally, you've made it here. First, tell me, how did you like the beauty you solved in the first puzzle? 😍 Haha...

Your dream was to receive love letters from your wife, and today this is the 2nd letter, but digitally.🙈 We have to move with the times, don't we? It's a digital world now. hehe..😜

I want to tell you that, I didn't know who you were yesterday 🤔, but today, whoever you are in front of me, that's my truth, and it's the most beautiful truth of my life...❤️ and you are the best... Believe me, it's not just because I like you... but you truly are the best,💯 I have felt it.

Nisarg my love... maybe tomorrow you might gain weight... which I won't let happen...😂 but if you do... or if your size changes... still, what I have for you in my heart will always remain... You might not make me coffee... but I will always make you your favorite tea...🍵 This doesn't mean you won't do anything.🙃

Always remember... I will always be with you...🫂 even in your bad times. I never had a dream of traveling the world... but now I do, with you...🗺️ and we will do this together.

Now I'm just waiting for you to come...⏰ my heart goes dhak dhak now...🥰

Every moment with you feels like a fairytale🧚, and I never want this story to end. You've painted my world with colors 🎨 I never knew existed. In your eyes 👀, I see my forever, in your smile, I find my home.🏠

Distance means nothing when someone means everything. Until we're together, know that you carry my heart with you wherever you go. ❤️`;

    let i = 0;
    let isDeleting = false;
    let currentText = '';

    function typeWriter() {
        if (i < text.length) {
            currentText = text.slice(0, i + 1);
            document.getElementById("letter").innerHTML = currentText.replace(/\n/g, '<br>') + '<span class="cursor"></span>';
            i++;

            // Add love particles occasionally
            if (Math.random() > 0.95) {
                createLoveParticle();
            }

            setTimeout(typeWriter, Math.random() * 50 + 30);
        } else {
            // Remove cursor when done
            document.getElementById("letter").innerHTML = currentText.replace(/\n/g, '<br>');
            // Final love explosion
            setTimeout(() => {
                for (let j = 0; j < 10; j++) {
                    setTimeout(() => createLoveParticle(), j * 100);
                }
            }, 1000);
        }
    }

    function createLoveParticle() {
        const container = document.querySelector('.letter-container');
        const particle = document.createElement('div');
        particle.className = 'love-particle';
        particle.innerHTML = ['💕', '💖', '💗', '💝', '❤️', '💘'][Math.floor(Math.random() * 6)];

        // Random position within the letter container
        const rect = container.getBoundingClientRect();
        particle.style.left = Math.random() * (rect.width - 20) + 'px';
        particle.style.top = Math.random() * (rect.height - 20) + 'px';

        container.appendChild(particle);

        // Remove particle after animation
        setTimeout(() => {
            if (particle.parentNode) {
                particle.parentNode.removeChild(particle);
            }
        }, 4000);
    }

    // Start typewriter effect when page loads
    setTimeout(() => {
        typeWriter();
    }, 1000);

    // Create additional floating elements
    setInterval(() => {
        if (Math.random() > 0.7) {
            createFloatingHeart();
        }
    }, 2000);

    function createFloatingHeart() {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.innerHTML = ['💖', '💕', '💗', '💝'][Math.floor(Math.random() * 4)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDelay = '0s';
        document.querySelector('.romantic-container').appendChild(heart);

        setTimeout(() => {
            if (heart.parentNode) {
                heart.parentNode.removeChild(heart);
            }
        }, 6000);
    }
</script>
{% endblock %}